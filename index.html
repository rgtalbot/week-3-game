<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1">
	<title>Hangman</title>
	<link rel="stylesheet" type="text/css" href="assets/css/reset.css">
	<link rel="stylesheet" type="text/css" href="assets/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
	<link rel="stylesheet" href="assets/css/font-awesome.css">
</head>

<body>
<div class="row text-center">
	<div class="col-xs-8 col-xs-offset-2">
 		<h4>Welcome to</h4>
 		<h1>80's Movies Hangman!</h1>
 	</div>
 </div>
 <div id="word"></div>
 <div id="letters"></div>
 <div id="wins"></div>
 <div id="guesses"></div>
 <script>
var guessed = [];

var wins = 0;

var misses = 6;
 // List of Computer Answers
var movieList = {
	movies: ['Ghostbusters', 'The Goonies', 'Back to the Future', 'Top Gun', 'Gremlins', 'The Breakfast Club'],

	alphabet: ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'],

	guessBank: ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'],

	winCheck: function() {
		var a = blanks.indexOf("_");
		console.log(a);
		if (a<0) {
			wins++;
			document.getElementById("wins").innerHTML = "Wins: " + wins;

			movieList.resetGame();
		}
	},

	wordUpdate: function() {
		var displayAnswer = "";
		for (var i = 0; i < answerLetters.length; i++){
			displayAnswer += blanks[i] + " ";
		}
		console.log(displayAnswer);
		document.getElementById("word").innerHTML = displayAnswer;
	},

	resetGame: function() {
		misses = 6;

		var computerGuess = movieList.movies[Math.floor(Math.random() * movieList.movies.length)];
	  console.log(computerGuess);

		var computerAnswer = computerGuess.toLowerCase().replace(/\s/g, '').split("").join('');
	  	console.log(computerAnswer);

			movieList.alphabet = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];

			guessed.length = 0;
			document.querySelector('#letters').innerHTML = "Letters guessed: " + guessed;
			answerLetters=[];
			blanks=[];

	for(var i = 0; i < computerAnswer.length; i++) {
		var j = computerAnswer.charAt(i);
		answerLetters.push(j);
		blanks.push("_");
	}
	movieList.wordUpdate();
},


};

document.getElementById("wins").innerHTML = "Wins: " + wins;
document.getElementById('guesses').innerHTML = "Number of Guesses Left: " + misses;

// Randomly selecting which answer the computer will use
 var computerGuess = movieList.movies[Math.floor(Math.random() * movieList.movies.length)];
 console.log(computerGuess);

// splitting the answer string into individual letters while removing spaces and making it all lowercase.
 var computerAnswer = computerGuess.toLowerCase().replace(/\s/g, '').split("").join('');
 	console.log(computerAnswer);

var answerLetters = [];
var blanks = [];

for(var i = 0; i < computerAnswer.length; i++) {
	var j = computerAnswer.charAt(i);
	answerLetters.push(j);
	blanks.push("_");
}

movieList.wordUpdate();


// user keystroke and executing compare function
 document.onkeyup=function(event) {
	var userGuess = String.fromCharCode(event.keyCode).toLowerCase();
	console.log(userGuess);
	for(var i = 0; i < movieList.alphabet.length; i++){
		if (userGuess == movieList.alphabet[i]) {


			for(var j=0; j < movieList.alphabet.length; j++) {
				if(userGuess == movieList.guessBank[j]) {
					guessed.push(userGuess);
					document.querySelector('#letters').innerHTML = "Letters guessed: " + guessed;
					movieList.guessBank.splice(j,1);

					var guessToChar = userGuess.charAt(0);
					console.log(guessToChar);
					var missTracker = 0;
					console.log(answerLetters);
					//check to see if the key was a hit
					for(var k = 0; k < answerLetters.length; k++){
						if (answerLetters[k] == guessToChar) {
							missTracker = 100;
							console.log("hit");

							blanks[k] = guessToChar;

							movieList.wordUpdate();

							movieList.winCheck();


						}
					}

					if (missTracker == 0) {
						misses --;
						misstracker = 0;

						if (misses ==0) {
							movieList.reset();
						}

						document.getElementById('guesses').innerHTML = "Number of Guesses Left: " + misses;
					} else {
						missTracker = 0;
					}
				} else {
					//do nothing
				}
			}
			} else {
				//more nothing
			}
		}

}

</script>
</body>
</html>
